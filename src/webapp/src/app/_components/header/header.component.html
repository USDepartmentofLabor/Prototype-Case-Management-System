<nav class="fixed-top navbar navbar-dark bg-dark navbar-expand">
  <div class="container-fluid pl-3">
    <a class="navbar-brand eps-logo" routerLink="/landing-page">
      {{ appTitle }}
      <span class="eps-logo-name">Case Management</span>
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarsExample07"
      aria-controls="navbarsExample07"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarsExample07">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="navbarDropdown"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            Cases
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a
              class="dropdown-item"
              *ngFor="let cd of caseDefinitions"
              [routerLink]="['/cases']"
              [queryParams]="{ case_defn_id: cd.id }"
              >{{ cd.name }}</a
            >
            <a
              class="dropdown-item"
              [routerLink]="['/cases']"
              >All Cases</a
            >
          </div>
        </li>

        <li *hasPerm="'READ_SURVEY'" class="nav-item">
          <a class="nav-link" routerLink="/forms">Data Collection Forms</a>
        </li>
        <li *hasPerm="'READ_REPORT'" class="nav-item">
          <a
            class="nav-link"
            target="blank"
            href="{{ generateLinkToMetabase() }}"
            >Analytics</a
          >
        </li>
      </ul>
      <div *ngIf="userDataLoaded" class="">
        <ul class="navbar-nav mr-auto">
          <li>
            <span
              class="w-40 user-inital-avatar circle"
              placement="bottom"
              data-container="body"
              [ngClass]="currUser.color"
              ngbTooltip="{{ currUser.username }}"
              >{{ avatarFirstInitial }}
            </span>
          </li>
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="http://example.com"
              id="dropdown07"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
              >{{ generateDisplayEmail() }}</a
            >
            <div class="dropdown-menu" aria-labelledby="dropdown07">
              <a class="dropdown-item" routerLink="/profile">My Profile</a>
              <div *hasPerm="'ADMIN'">
                <div class="dropdown-divider"></div>
                <h6 class="dropdown-header">Administrator</h6>
                <a class="dropdown-item" routerLink="/admin/users">Users</a>
                <a class="dropdown-item" routerLink="/admin/roles">Roles</a>
                <a class="dropdown-item" routerLink="/cases-definitions"
                  >Case Types</a
                >
                <!--<a class="dropdown-item" routerLink="/admin/project"
                  >Project Information</a
                >-->
                <a class="dropdown-item" routerLink="/admin/default-dashboard"
                  >Set Default Dashboard</a
                >
                <!--<a class="dropdown-item" (click)="openReportDialogPrompt()"
                  >Rebuild Reporting DB</a
                >-->
                <div class="dropdown-divider"></div>
              </div>
              <a class="dropdown-item" href="#">Help</a>
              <a (click)="logOut()" class="dropdown-item">Log Out</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<!--       <button class="navbar-item btn btn-primary btn-top-margin" type="button" routerLink="create-survey">Create Survey</button>-->
